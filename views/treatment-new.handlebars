<div class="container mt-4">
  <div class="row justify-content-center">
    <div class="col-12 col-sm-10 col-md-8">

      {{#if treatment.tid}}
        <h1>Modify treatment</h1>
      {{else}}
        <h1>New treatment</h1>
      {{/if}}

      <div class="treatment-form">

        {{#if treatment.tid}}
          <form action="/treatments/modify/{{treatment.tid}}" method="POST">
        {{else}}
          <form action="/treatments/new" method="POST">
        {{/if}}

        {{!-- The following 11 lines of code were adapted from ChatGTP https://chatgpt.com/share/66fe5921-be8c-800b-8278-dc2138f42d73 Accessed: 2024-10-03 --}}
        <div>
          <label for="treatpat">Patient:</label>
          <select class="form-control form-control-sm" id="treatpat" name="treatpat" required>
            {{#each patients}}
              <option value="{{pid}}" 
                {{#if (isEqual pid ../treatment.pid)}} selected="selected"{{/if}}>
                {{pfname}} {{plname}}
              </option>
            {{/each}}
          </select>
        </div>

        <div>
          <label for="treatstart">Start date:</label>
          <input class="form-control form-control-sm" type="date" id="treatstart" name="treatstart" required value="{{treatment.tstart}}" />
        </div>

        <div>
          <label for="treatend">End date:</label>
          <input class="form-control form-control-sm" type="date" id="treatend" name="treatend" value="{{treatment.tend}}" />
        </div>

        <div>
          <label for="treatdesc">Description:</label>
          <textarea class="form-control" rows="5" id="treatdesc" name="treatdesc" required>{{treatment.tdesc}}</textarea>
        </div>

        <div>
          <label for="treatmedname">Medicine name:</label>
          <input class="form-control form-control-sm" type="text" id="treatmedname" name="treatmedname" value="{{treatment.tmed}}" />
        </div>

        <div>
          <label for="treatmeddose">Dose:</label>
          <input class="form-control form-control-sm" type="text" id="treatmeddose" name="treatmeddose" value="{{treatment.tdose}}" />
        </div>

        {{!-- The following 11 lines of code were adapted from ChatGTP https://chatgpt.com/share/66fe5921-be8c-800b-8278-dc2138f42d73 Accessed: 2024-10-03 --}}
        <div>
          <label for="treatdoc">Select Doctor:</label>
          <select class="form-control form-control-sm" id="treatdoc" name="treatdoc" required>
            {{#each doctors}}
              <option value="{{did}}" 
                {{#if (isEqual did ../treatment.did)}} selected="selected"{{/if}}>
                {{dfname}} {{dlname}}
              </option>
            {{/each}}
          </select>
        </div>

        <div>
          <button class="btn btn-success btn-sm mt-3 mb-3" type="submit">
            {{#if treatment.tid}}Update Treatment{{else}}Add Treatment{{/if}}
          </button>
        </div>
      </form>

      {{!-- The use of history.back() adapted from stackoverflow
      Source: (Bajrang, 2012, "How to make an HTML back link?", https://stackoverflow.com/a/8814534) --}}
      <a class="btn btn-secondary btn-sm mt-3 mb-3" href="javascript:history.back()">Back</a>
      
    </div>
  </div>
</div>

